from hashlib import sha256
print("Здравствуйте, для входа введите 1, чтобы создать аккаунт введите 2")
do = input()


def registration():
    print("Введите желаемый логин")
    user_login = input()
    print("Введите пароль")
    password = input()
    try:
        password_hash = sha256(password.encode('utf-8')).hexdigest()
        my_file = open(f"{user_login}.txt", "w+")
        my_file.write(f"{password_hash}")
        print("Аккаунт успешно создан")
    except Exception as ex:
        print(f"При попытки создания аккаунта произошла ошибка: {ex}")


def login():
    print("Введите логин")
    user_login = input()
    print("Введите пароль")
    password = input()
    try:
        my_file = open(f"{user_login}.txt", "r")
        lines = my_file.readlines()
        right_hash = lines[0].strip()
        password_hash = sha256(password.encode('utf-8')).hexdigest()
        if password_hash == right_hash:
            print(f"Успешный вход, добрый день")
        else:
            print("Неверный пароль")
    except Exception as ex:
        print(f"При попытки создания аккаунта произошла ошибка: {ex}")


if do == '1':
    login()
elif do == '2':
    registration()
else:
    print("Неизвестное действие")
